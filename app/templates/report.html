{% extends "base.html" %}

{% block title %}
Reports
{% endblock %}

{% block content %}
<h3 class="text-center my-4">Total Paid Per Month By Category ({{ current_year }})</h3>
<br>
<div class="table-responsive" style="max-height: 300px; overflow-y: auto;">
    <table class="table table-hover" id="scroll-table">
        <thead class="table-light">
            <tr>
                <th class="sticky-top">Month</th>
                {% for category in categories %}
                <th class="sticky-top">{{ category.name }}</th>
                {% endfor %}
                <th class="sticky-top">Total</th>
            </tr>
        </thead>
        <tbody>
            {% for month, expenses in spending_trends_table.items() %}
            <tr>
                <td>{{ month }}</td>
                {% for category_expense in expenses %}
                {% if category_expense == 0 %}
                <td>-</td>
                {% else %}
                <td>{{ '$' }}{{ category_expense }}</td>
                {% endif %}
                {% endfor %}
                <td>{{ '$' }}{{ expenses | sum }}</td>
            </tr>
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <td></td>
                {% for total in totals %}
                {% if total == 0 %}
                <td>-</td>
                {% else %}
                <td>{{ '$' }}{{ total }}</td>
                {% endif %}
                {% endfor %}
                <td>{{ '$' }}{{ grand_total }}</td>
            </tr>
        </tfoot>
    </table>
</div>
{% endblock %}
